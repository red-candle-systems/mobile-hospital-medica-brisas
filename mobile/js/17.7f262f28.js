(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"3ebe":function(t,e,a){},"63c2":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"q-pa-md"},[i("q-layout",{attrs:{id:"q-app-2",view:"lHh Lpr lFf"}},[i("q-header",{staticClass:"glossy",class:t.drawerState?" bg-Mycolor":"bg-primary",staticStyle:{height:"150px","border-radius":"0 0 1rem 1rem"}},[i("q-toolbar",{staticClass:"justify-center"},[i("q-img",{staticClass:"shadow-7",staticStyle:{"margin-top":"0.5rem",height:"60px",width:"100%","border-radius":"0.5rem"},attrs:{basic:"",src:a("5dfc")}}),i("div",{staticClass:"fixed-top-right"},[i("UserAccount")],1)],1),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-2 col-2"},[i("q-img",{staticClass:"fixed-top-left",staticStyle:{height:"4.1rem",width:"4.1rem",margin:"0.4rem","border-radius":"0.5rem"},attrs:{basic:"",src:a("67dc")}}),i("q-btn",{staticClass:"fixed-top-left",staticStyle:{height:"4.1rem",width:"4.1rem",margin:"0.4rem","border-radius":"0.5rem"},attrs:{to:"/Home"}})],1),i("div",{staticClass:"col-12",staticStyle:{"text-align":"center","margin-top":"-0.8rem"}},[i("h5",{staticStyle:{padding:"0.5rem",margin:"2rem 1rem 0rem 1rem","border-radius":"0.5rem","background-color":"#193d5c"}},[t._v("\n            Mantenimientos\n          ")])])])],1),i("q-page-container",[i("MaintanceTable"),i("br")],1)],1),i("div",{staticClass:"fixed-bottom-right z-top justify-center",staticStyle:{"margin-bottom":"4rem","margin-right":"1rem"}},[i("q-btn",{attrs:{label:"Ver detalles",color:"blue-10",push:"",icon:"read_more"},on:{click:function(e){return t.obtenerSeleccionado()}}})],1)],1)},s=[],o=a("3a8f"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-table",{attrs:{title:"Lista Mantenimientos",data:t.data,columns:t.columns,"row-key":"index",flat:"",selection:"single",selected:t.selected,loading:t.loading,pagination:t.initialPagination},on:{"update:selected":function(e){t.selected=e}},scopedSlots:t._u([{key:"loading",fn:function(){return[1==t.loading?a("q-spinner-cube",{staticClass:"self-center",staticStyle:{margin:"1rem"},attrs:{indeterminate:"",showing:"",reverse:"",size:"70px",thickness:1,color:t.drawerState?"white":"primary","track-color":"light-blue"}}):t._e()]},proxy:!0}])})],1)},n=[],l=(a("e6cf"),{data(){return{selected:[],loading:!0,alert:!1,initialPagination:{rowsPerPage:50},columns:[{name:"index",label:"#",field:"index"},{Tipo_Mantenimiento:"Tipo_Mantenimiento",required:!0,label:"Tipo de mantenimiento",align:"left",field:t=>t.Tipo_Mantenimiento,format:t=>`${t}`,sortable:!0},{Nombre_Encargado:"Nombre_Encargado",align:"left",label:"Nombre del encargado",field:"Nombre_Encargado",sortable:!0},{Fecha_Mantenimiento:"Fecha_Mantenimiento",align:"left",label:"AÃ±o - Mes",field:"Fecha",sortable:!0},{Dia:"Dia",align:"left",label:"Dia - hora",field:"Dia",sortable:!0},{Costo_Mantenimiento:"Costo_Mantenimiento",align:"left",label:"Gasto total",field:"Costo_Mantenimiento",sortable:!0,sort:(t,e)=>parseFloat(t,10)-parseFloat(e,10)}],data:[]}},created(){this.getMantenances();var t={Status:!1},e=t,a={reporte:e,lastRoute:this.$router.currentRoute.path};this.Flags=a},updated(){this.MantenimientoSelected=this.selected},methods:{async getMantenances(){try{await this.$store.dispatch("cardState/getMaintenancesByIdAction",this.IDEM),this.$data.data=this.Mantenimientos}catch(t){this.$q.notify({color:"red",textColor:"white",icon:"search_off",message:"Error cargando los mantenimientos para este equipo "+t})}await this.data.forEach(((t,e)=>{t.index=e})),0==this.data.length?(this.loading=!1,this.$q.notify({color:"blue-10",textColor:"white",icon:"search_off",timeout:1e3,message:"Aun no hay mantenimientos para este equipo"})):this.loading=!1}},computed:{IDEM:{get(){return this.$store.state.cardState.IDEM},set(t){this.$store.commit("cardState/updateIDEM",t)}},MantenimientoSelected:{get(){return this.$store.state.cardState.MantenimientoSelected},set(t){this.$store.commit("cardState/updateMantenimientoSelected",t)}},drawerState:{get(){return this.$store.state.showcase.drawerState?this.$q.dark.set(!0):this.$q.dark.set(!1),this.$store.state.showcase.drawerState},set(t){this.$store.commit("showcase/updateDrawerState",t)}},Flags:{get(){return this.$store.state.global.Flags},set(t){this.$store.commit("global/updateFlags",t)}},MaintenanceSectionSelected:{get(){return this.$store.state.cardState.MaintenanceSectionSelected},set(t){this.$store.commit("cardState/updateMaintenanceSectionSelected",t)}},Mantenimientos:{get(){return this.$store.state.cardState.Mantenimientos},set(t){this.$store.commit("cardState/updateMaintenances",t)}}}}),c=l,d=a("2877"),m=a("eaac"),h=a("a6a3"),u=a("eebe"),g=a.n(u),p=Object(d["a"])(c,r,n,!1,null,null,null),b=p.exports;g()(p,"components",{QTable:m["a"],QSpinnerCube:h["a"]});var f={name:"EquipmentDetail",components:{UserAccount:o["a"],MaintanceTable:b},data(){return{leftDrawerOpen:!1,alert:!1,seleccionado:0}},methods:{obtenerSeleccionado(){if(1==this.Usuario.rol||2==this.Usuario.rol){if(this.MantenimientoSelected.length>0){var t={ID_Reporte:"",ID_Equipo:"",Reporte:"",Status:!1},e={reporte:t,lastRoute:"/MaintenanceList/"};this.Flags=e,this.$router.push({path:"/MaintenanceDetail/"})}0===this.MantenimientoSelected.length&&this.$q.notify({position:"bottom",timeout:1e3,textColor:"white",color:"yellow-10",message:"Seleccione un mantenimiento de la lista!!"})}3!=this.Usuario.rol||this.$q.notify({position:"bottom",timeout:2500,textColor:"white",color:"yellow-10",message:"No tienes los permisos para ver un Mantenimiento"})}},computed:{MantenimientoSelected:{get(){return this.$store.state.cardState.MantenimientoSelected}},drawerState:{get(){return this.$store.state.showcase.drawerState?this.$q.dark.set(!0):this.$q.dark.set(!1),this.$store.state.showcase.drawerState},set(t){this.$store.commit("showcase/updateDrawerState",t)}},Usuario:{get(){return this.$store.state.global.Usuario},set(t){this.$store.commit("global/updateUsuario",t)}},Flags:{get(){return this.$store.state.global.Flags},set(t){this.$store.commit("global/updateFlags",t)}}}},S=f,w=(a("70b3"),a("4d5a")),M=a("e359"),$=a("65c6"),y=a("068f"),q=a("9c40"),_=a("09e3"),C=Object(d["a"])(S,i,s,!1,null,null,null);e["default"]=C.exports;g()(C,"components",{QLayout:w["a"],QHeader:M["a"],QToolbar:$["a"],QImg:y["a"],QBtn:q["a"],QPageContainer:_["a"]})},"70b3":function(t,e,a){"use strict";a("3ebe")}}]);