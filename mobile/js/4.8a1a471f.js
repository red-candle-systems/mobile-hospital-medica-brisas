(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"02cd":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",{attrs:{id:"q-app",view:"lHh Lpr lFf"}},[s("q-header",{staticClass:"glossy",class:t.drawerState?" bg-Mycolor":"bg-primary",staticStyle:{height:"150px","border-radius":"0 0 1rem 1rem"}},[s("q-toolbar",{staticClass:"justify-center"},[s("q-img",{staticClass:"shadow-7",staticStyle:{"margin-top":"0.5rem",height:"60px",width:"100%","border-radius":"0.5rem"},attrs:{basic:"",src:a("d683")}}),s("div",{staticClass:"fixed-top-right"},[s("UserAccount")],1)],1),s("div",{staticClass:"row"},[s("q-img",{staticClass:"fixed-top-left",staticStyle:{height:"4.1rem",width:"4.1rem",margin:"0.4rem","border-radius":"0.5rem"},attrs:{basic:"",src:a("67dc")}}),s("q-btn",{staticClass:"fixed-top-left",staticStyle:{height:"4.1rem",width:"4.1rem",margin:"0.4rem","border-radius":"0.5rem"},attrs:{to:"/Home"}}),s("div",{staticClass:"col-12",staticStyle:{"text-align":"center","margin-top":"-0.8rem"}},[s("h5",{staticStyle:{padding:"0.5rem",margin:"2rem 1rem 0rem 1rem","border-radius":"0.5rem","background-color":"#193d5c"}},[t._v("\n          Indicadores\n        ")])])],1)],1),s("q-page-container",{staticStyle:{"margin-top":"1rem","margin-bottom":"2rem"}},[s("router-view"),s("GridStatistics")],1)],1)},i=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-col-gutter-x-xs q-col-gutter-y-lg"},[t.spinner?a("q-spinner-gears",{staticClass:"fixed-center z-top",attrs:{indeterminate:"",reverse:"",size:"100px",thickness:1,color:"blue","track-color":"light-blue"}}):t._e(),t.spinner?a("q-item-label",{staticClass:"fixed-center labelCargando z-top text-white",staticStyle:{"background-color":"rgb(0, 0, 0, 0.6)","border-radius":"0.5rem",padding:"0.5rem"},attrs:{overline:""}},[t._v("Cargando estadísticas...")]):t._e(),t._l(t.ArrayStatistics,(function(t,e){return a("div",{key:e,staticClass:"col-lg-3 col-md-4 col-sm-6 col-xs-12"},[a("card-statistics",{attrs:{StatisticsValue:t.StatisticsValue,StatisticsLabel:t.StatisticsLabel}})],1)}))],2)])},o=[],n=(a("fb6a"),a("e6cf"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex flex-center"},[a("q-card",{staticClass:"my-card"},[a("q-card-section",[a("div",{staticClass:"flex flex-center"},[a("q-card-section",{attrs:{horizontal:""}},[a("div",{staticClass:"row",staticStyle:{width:"60%"}},[a("q-item-label",{staticClass:"col text-weight-bolder qItemLabelStyle",class:t.drawerState?"clase-blanca":"clase-negra",staticStyle:{"font-size":"0.9rem"},attrs:{overline:""}},[t._v(t._s(t.StatisticsLabel)+"\n            ")])],1),a("q-knob",{staticClass:"text-orange q-ma-md",attrs:{readonly:"","show-value":"",size:"90px",thickness:.22,color:"orange","track-color":"orange-3",max:100},model:{value:t.StatisticsValue,callback:function(e){t.StatisticsValue=e},expression:"StatisticsValue"}})],1)],1)])],1)],1)}),c=[],l={data(){return{AtencionFalla:0,"ReemplazoDaño":0,FallaRepentina:0,MantenimientoVigente:0,CumplirProgramados:0}},name:"StatisticsCard",props:{StatisticsValue:{type:Number,default:0},StatisticsLabel:{type:String,default:""}},computed:{drawerState:{get(){return this.$store.state.showcase.drawerState?this.$q.dark.set(!0):this.$q.dark.set(!1),this.$store.state.showcase.drawerState},set(t){this.$store.commit("showcase/updateDrawerState",t)}}}},d=l,h=(a("8be8"),a("2877")),m=a("f09f"),p=a("a370"),u=a("0170"),S=a("3845"),g=a("eebe"),v=a.n(g),f=Object(h["a"])(d,n,c,!1,null,"146adf7d",null),b=f.exports;v()(f,"components",{QCard:m["a"],QCardSection:p["a"],QItemLabel:u["a"],QKnob:S["a"]});var w=a("5d36"),q={name:"LayoutDefault",components:{CardStatistics:b},data(){return{AtencionFalla:0,"ReemplazoDaño":0,FallaRepentina:0,MantenimientoVigente:0,CumplirProgramados:0,TotalMantenimientos:[],EquiposInactivos:[],MantenimientosPreventivos:[],MantenimientosCorrectivos:[],MantenimientosPreventivosProgramados:0,TotalReportes:[],ReportesActivos:[],spinner:!0,ArrayStatistics:[{StatisticsValue:0,StatisticsLabel:"Efectividad en la atención a los reportes de falla"},{StatisticsValue:0,StatisticsLabel:"Equipos médicos reemplazados por obsolencia o daño"},{StatisticsValue:0,StatisticsLabel:"Falla repentina de equipo médico"},{StatisticsValue:0,StatisticsLabel:"Equipos con certificado de mantenimiento vigente"},{StatisticsValue:0,StatisticsLabel:"Cumplimiento de mantenimientos preventivos programados"}]}},created(){let t=new Date;this.StatisticSectionSelected.Mes==t.getMonth()+1&&this.StatisticSectionSelected.Año==t.getFullYear()?this.doOperations:this._getStatistics},destroyed(){this.Estadisticas=[],this.spinner=!1},computed:{Equipos:{get(){return this.$store.state.cardState.Equipos},set(t){this.$store.commit("cardState/updateEquipments",t)}},async _getStatistics(){try{await this.$store.dispatch("cardState/getStatisticsAction",this.StatisticSectionSelected),this.dateStatistics}catch(t){this.$q.notify({color:"red-13",textColor:"white",icon:"search_off",message:"No existen estadísticas para este mes "+t})}this.spinner=!1},_getCards(){for(var t=0;t<this.Equipos.length;t++){!1===this.Equipos[t].Estado_Servicio&&this.EquiposInactivos.push(this.Equipos[t]);let e=(new Date).getMonth()+1;1==e.toString().length&&(e="0"+e.toString()),this.Equipos[t].Siguiente_Mantenimiento.slice(0,7)==(new Date).getFullYear().toString()+"-"+e&&(this.MantenimientosPreventivosProgramados+=1)}},async _getMantenimientos(){let t=new Date,e=t.getMonth()+1;1==e.toString().length&&(e="0"+e);var a={"Año":t.getFullYear(),Mes:e};const s=await w["a"].getAllMantenances(a);this.$data.TotalMantenimientos=s.data;for(var i=0;i<this.TotalMantenimientos.length;i++)"Preventivo"===this.TotalMantenimientos[i].Tipo_Mantenimiento?this.MantenimientosPreventivos.push(this.TotalMantenimientos[i]):"Correctivo"===this.TotalMantenimientos[i].Tipo_Mantenimiento&&this.MantenimientosCorrectivos.push(this.TotalMantenimientos[i])},_getReports(){this.$data.TotalReportes=this.Reportes;for(var t=0;t<this.TotalReportes.length;t++)this.TotalReportes[t].Status&&this.ReportesActivos.push(this.TotalReportes[t])},Reportes:{get(){return this.$store.state.cardState.Reportes},set(t){this.$store.commit("updateReportes",t)}},StatisticSectionSelected:{get(){return this.$store.state.cardState.StatisticSectionSelected},set(t){this.$store.commit("cardState/updateStatisticSectionSelected",t)}},Estadisticas:{get(){return this.$store.state.cardState.Estadisticas},set(t){this.$store.commit("cardState/updateStatistics",t)}},async doOperations(){this._getCards,this._getReports,await this._getMantenimientos,this.AtencionFalla=this.MantenimientosCorrectivos.length/this.TotalReportes.length*100,this.AtencionFalla=this.AtencionFalla.toFixed(2),this.ArrayStatistics[0].StatisticsValue=parseFloat(this.AtencionFalla),this.ReemplazoDaño=this.EquiposInactivos.length/this.Equipos.length*100,this.ReemplazoDaño=this.ReemplazoDaño.toFixed(2),this.ArrayStatistics[1].StatisticsValue=parseFloat(this.ReemplazoDaño),this.FallaRepentina=this.MantenimientosCorrectivos.length/this.Equipos.length*100,this.FallaRepentina=this.FallaRepentina.toFixed(2),this.ArrayStatistics[2].StatisticsValue=parseFloat(this.FallaRepentina),this.MantenimientoVigente=this.MantenimientosPreventivos.length/this.Equipos.length*100,this.MantenimientoVigente=this.MantenimientoVigente.toFixed(2),this.ArrayStatistics[3].StatisticsValue=parseFloat(this.MantenimientoVigente),this.CumplirProgramados=this.MantenimientosPreventivos.length/this.MantenimientosPreventivosProgramados*100,this.CumplirProgramados=this.CumplirProgramados.toFixed(2),this.ArrayStatistics[4].StatisticsValue=parseFloat(this.CumplirProgramados),this.spinner=!1},dateStatistics(){this.Estadisticas.Estadisticas.map((t=>{this.ArrayStatistics[t.Numero-1].StatisticsValue=t.Cantidad}))},drawerState:{get(){return this.$store.state.showcase.drawerState?this.$q.dark.set(!0):this.$q.dark.set(!1),this.$store.state.showcase.drawerState},set(t){this.$store.commit("showcase/updateDrawerState",t)}}}},C=q,y=(a("c98d"),a("cf57")),M=Object(h["a"])(C,r,o,!1,null,"19100ee4",null),x=M.exports;v()(M,"components",{QSpinnerGears:y["a"],QItemLabel:u["a"]});var $=a("3a8f"),F={name:"CardsPage",components:{GridStatistics:x,UserAccount:$["a"]},data(){return{leftDrawerOpen:!1}},computed:{drawerState:{get(){return this.$store.state.showcase.drawerState?this.$q.dark.set(!0):this.$q.dark.set(!1),this.$store.state.showcase.drawerState},set(t){this.$store.commit("showcase/updateDrawerState",t)}}}},R=F,_=(a("89cc"),a("4d5a")),E=a("e359"),V=a("65c6"),A=a("068f"),P=a("9c40"),k=a("09e3"),T=Object(h["a"])(R,s,i,!1,null,null,null);e["default"]=T.exports;v()(T,"components",{QLayout:_["a"],QHeader:E["a"],QToolbar:V["a"],QImg:A["a"],QBtn:P["a"],QPageContainer:k["a"]})},"736f":function(t,e,a){},"89cc":function(t,e,a){"use strict";a("9b62")},"8be8":function(t,e,a){"use strict";a("ff40")},"9b62":function(t,e,a){},c98d:function(t,e,a){"use strict";a("736f")},ff40:function(t,e,a){}}]);