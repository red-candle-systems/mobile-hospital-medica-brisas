(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"077d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"q-pa-md"},[i("q-layout",{attrs:{id:"q-app-2",view:"lHh Lpr lFf"}},[i("q-header",{staticClass:"glossy",class:t.drawerState?" bg-Mycolor":"bg-primary",staticStyle:{height:"150px","border-radius":"0 0 1rem 1rem"}},[i("q-toolbar",{staticClass:"justify-center"},[i("q-img",{staticClass:"shadow-7",staticStyle:{"margin-top":"0.5rem",height:"60px",width:"100%","border-radius":"0.5rem"},attrs:{basic:"",src:a("5dfc")}}),i("div",{staticClass:"fixed-top-right"},[i("UserAccount")],1)],1),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-2 col-2"},[i("q-img",{staticClass:"fixed-top-left",staticStyle:{height:"4.1rem",width:"4.1rem",margin:"0.4rem","border-radius":"0.5rem"},attrs:{basic:"",src:a("67dc")}}),i("q-btn",{staticClass:"fixed-top-left",staticStyle:{height:"4.1rem",width:"4.1rem",margin:"0.4rem","border-radius":"0.5rem"},attrs:{to:"/Home"}})],1),i("div",{staticClass:"col-12",staticStyle:{"text-align":"center","margin-top":"-0.8rem"}},[i("h5",{staticStyle:{padding:"0.5rem",margin:"2rem 1rem 0rem 1rem","border-radius":"0.5rem","background-color":"#193d5c"}},[t._v("\n            Creación de mantenimiento\n          ")])])])],1),i("q-page-container",[i("MaintenanceInput"),i("br")],1)],1)],1)},s=[],r=a("3a8f"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12",staticStyle:{"margin-right":"1rem","margin-top":"0.5rem"}},[a("div",{staticClass:"row q-col-gutter-x-xs q-col-gutter-y-lg"},[a("div",{staticClass:"col-12 col-sm-6 col-lg-4 col-md-4"},[a("ActivityList")],1),a("div",{staticClass:"col-12 col-sm-6 col-lg-4 col-md-4"},[a("MaterialList")],1),a("div",{staticClass:"col-12 col-sm-6 col-lg-4 col-md-4"},[a("ToolsList")],1),a("div",{staticClass:"col-12 col-sm-6 col-lg-4 col-md-4"},[a("q-toolbar",{staticClass:"justify-center"},[a("q-img",{staticClass:"imageStyle",attrs:{src:t.ImagenEquipo}})],1),a("div",{staticClass:"glossy",staticStyle:{"background-color":"#1976d2",height:"0.2rem",width:"100%","margin-top":"1rem"}})],1),a("div",{staticClass:"col-12 col-sm-6 col-lg-4 col-md-4"},[a("q-input",{staticStyle:{width:"100%"},attrs:{label:"Ingeniero",readonly:"",filled:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"line_weight"}})]},proxy:!0}]),model:{value:t.InChargeName,callback:function(e){t.InChargeName=e},expression:"InChargeName"}})],1),a("div",{staticClass:"col-12 col-sm-6 col-lg-4 col-md-4"},[a("q-input",{staticStyle:{width:"100%"},attrs:{type:"number",color:"blue",filled:"",label:"Costo de Mantenimiento"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"attach_money"}})]},proxy:!0}]),model:{value:t.costoMantenimiento,callback:function(e){t.costoMantenimiento=e},expression:"costoMantenimiento"}})],1),a("div",{staticClass:"col-12 col-sm-6 col-lg-4 col-md-4"},[a("q-select",{staticStyle:{width:"100%"},attrs:{filled:"",color:"blue",options:t.options,label:"Tipo De Mantenimiento"},model:{value:t.TipoMantenimiento,callback:function(e){t.TipoMantenimiento=e},expression:"TipoMantenimiento"}})],1)])]),a("div",{staticClass:"absolute-bottom-right max-top",staticStyle:{"margin-right":"-1rem","margin-bottom":"1.5rem"}},[a("q-btn",{staticStyle:{margin:"1rem 0rem 1rem 1rem",width:"140px"},attrs:{label:"Guardar",color:"blue-10",push:"",icon:"save"},on:{click:t._insertMaintenance}}),a("q-btn",{staticStyle:{margin:"1rem",width:"140px"},attrs:{push:"",icon:"keyboard_backspace",label:"Salir",color:"blue-10"},on:{click:function(e){t.confirm=!0}}})],1),a("q-dialog",{model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("¡Registro guardado!")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("Su registro ha sido guardado exitosamente")]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK",to:t.lastRoute,color:"blue"}})],1)],1)],1),a("q-dialog",{model:{value:t.alertfalse,callback:function(e){t.alertfalse=e},expression:"alertfalse"}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("¡Registro no guardado!")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("Su registro no ha sido guardado, verifique que ha ingresado los\n          datos correctos y vuelva a intentarlo")]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK",color:"blue"}})],1)],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-avatar",{attrs:{icon:"keyboard_return",color:"blue","text-color":"white"}}),a("span",{staticClass:"q-ml-sm"},[t._v("¿Seguro que deseas salir?")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"blue"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Salir",to:"/MaintenanceList",color:"blue"}})],1)],1)],1)],1),a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"100%"}},[a("h5",{staticClass:"glossy text-center bg-blue-10",staticStyle:{color:"white","font-family":"Serif","border-radius":"0.5rem"}},[t._v("\n        Observaciones\n      ")]),a("div",{staticClass:"q-pa-md q-gutter-sm",staticStyle:{"margin-top":"-2.8rem"}},[a("q-editor",{attrs:{toolbar:[["bold","italic","strike","underline"]]},model:{value:t.Observaciones,callback:function(e){t.Observaciones=e},expression:"Observaciones"}})],1),a("div",{staticClass:"glossy",staticStyle:{"background-color":"#1976d2",height:"0.2rem",width:"100%","margin-bottom":"4rem"}})])])])},l=[],n=(a("e6cf"),a("ddb0"),a("ded3")),c=a.n(n),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{staticStyle:{height:"54px",width:"100%"},attrs:{label:"Lista de Actividades",unelevated:"","text-color":"white",color:"blue-10",transparent:""},on:{click:function(e){t.fixed=!0}}}),a("q-dialog",{model:{value:t.fixed,callback:function(e){t.fixed=e},expression:"fixed"}},[a("q-card",{staticStyle:{width:"100%"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Lista de Actividades")])]),a("q-separator"),a("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"50vh",width:"100%"}},[a("q-input",{staticStyle:{width:"100%"},attrs:{color:"blue",filled:"",label:"Descripcion de a Actividad"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"line_weight"}})]},proxy:!0}]),model:{value:t.newActivity,callback:function(e){t.newActivity=e},expression:"newActivity"}}),a("br"),a("q-btn",{staticClass:"float-right",attrs:{color:"positive",push:""},on:{click:t.addNewAct}},[t._v("Agregar")])],1),a("q-separator"),a("q-card-section",[a("q-list",{attrs:{bordered:""}},t._l(t.actividades,(function(e,i){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:i,attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[t._v(t._s(i))]),a("q-item-section",[t._v(t._s(e))]),a("q-item-section",{attrs:{avatar:""}},[a("q-btn",{attrs:{size:"sm",color:"white"},on:{click:function(e){return t.eliminar(i)}}},[a("q-icon",{attrs:{name:"delete",color:"red"}})],1)],1)],1)})),1)],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Quitar",color:"blue"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Acceptar",color:"blue"}})],1)],1)],1)],1)},p=[],m=(a("a434"),{data(){return{basic:!1,fixed:!1,newActivity:"",actividades:[]}},methods:{addNewAct(){""!==this.newActivity?(this.actividades.push(this.newActivity),this.Actividades=[...this.actividades],this.newActivity=""):this.$q.notify({position:"bottom",timeout:2500,textColor:"white",type:"warning",message:"Ingresa una actividad!!."})},eliminar(t){this.actividades.splice(t,1)}},computed:{Actividades:{get(){return this.$store.state.global.Actividades},set(t){this.$store.commit("global/updateActividades",t)}}}}),u=m,h=a("2877"),g=a("9c40"),b=a("24e8"),v=a("f09f"),f=a("a370"),q=a("eb85"),w=a("27f9"),C=a("0016"),y=a("1c1c"),S=a("66e5"),x=a("4074"),_=a("4b7e"),M=a("714f"),$=a("7f67"),Q=a("eebe"),k=a.n(Q),A=Object(h["a"])(u,d,p,!1,null,null,null),I=A.exports;k()(A,"components",{QBtn:g["a"],QDialog:b["a"],QCard:v["a"],QCardSection:f["a"],QSeparator:q["a"],QInput:w["a"],QIcon:C["a"],QList:y["a"],QItem:S["a"],QItemSection:x["a"],QCardActions:_["a"]}),k()(A,"directives",{Ripple:M["a"],ClosePopup:$["a"]});var N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{staticStyle:{height:"54px",width:"100%"},attrs:{label:"Lista de Materiales",unelevated:"","text-color":"white",color:"blue-10"},on:{click:function(e){t.fixed=!0}}}),a("q-dialog",{model:{value:t.fixed,callback:function(e){t.fixed=e},expression:"fixed"}},[a("q-card",{staticStyle:{width:"100%"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Lista de Materiales")])]),a("q-separator"),a("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"50vh",width:"100%"}},[a("q-input",{staticStyle:{width:"100%"},attrs:{color:"blue",filled:"",label:"Material"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"line_weight"}})]},proxy:!0}]),model:{value:t.material,callback:function(e){t.material=e},expression:"material"}}),a("br"),a("q-input",{staticStyle:{width:"100%"},attrs:{color:"blue",filled:"",label:"Cantidad"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"line_weight"}})]},proxy:!0}]),model:{value:t.cantidad,callback:function(e){t.cantidad=e},expression:"cantidad"}}),a("br"),a("q-btn",{staticClass:"float-right",attrs:{color:"positive",push:""},on:{click:t.addNewMaterial}},[t._v("Agregar")])],1),a("q-separator"),a("q-card-section",[a("q-list",{attrs:{bordered:""}},t._l(t.materiales,(function(e,i){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:i,attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[t._v(t._s(e.Cantidad))]),a("q-item-section",[t._v(t._s(e.Material))]),a("q-item-section",{attrs:{avatar:""}},[a("q-btn",{attrs:{size:"sm",color:"white"},on:{click:function(e){return t.eliminar(i)}}},[a("q-icon",{attrs:{name:"delete",color:"red"}})],1)],1)],1)})),1)],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Quitar",color:"blue"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Aceptar",color:"blue"}})],1)],1)],1)],1)},E=[],D={data(){return{basic:!1,fixed:!1,materialobj:{},material:"",cantidad:"",materiales:[]}},methods:{addNewMaterial(){""!==this.material&&""!==this.cantidad?(this.materialobj.Material=this.material,this.materialobj.Cantidad=this.cantidad,this.materiales.push(this.materialobj),this.materialobj={},this.Materiales=[...this.materiales],this.material="",this.cantidad=""):this.$q.notify({position:"bottom",timeout:2500,textColor:"white",type:"warning",message:"Ingresa correctamente el Material y la Cantidad"})},eliminar(t){this.materiales.splice(t,1)}},computed:{Materiales:{get(){return this.$store.state.global.Materiales},set(t){this.$store.commit("global/updateMateriales",t)}}}},R=D,F=Object(h["a"])(R,N,E,!1,null,null,null),L=F.exports;k()(F,"components",{QBtn:g["a"],QDialog:b["a"],QCard:v["a"],QCardSection:f["a"],QSeparator:q["a"],QInput:w["a"],QIcon:C["a"],QList:y["a"],QItem:S["a"],QItemSection:x["a"],QCardActions:_["a"]}),k()(F,"directives",{Ripple:M["a"],ClosePopup:$["a"]});var T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{staticStyle:{height:"54px",width:"100%"},attrs:{label:"Lista de Herramientas",unelevated:"","text-color":"white",color:"blue-10",transparent:""},on:{click:function(e){t.fixed=!0}}}),a("q-dialog",{model:{value:t.fixed,callback:function(e){t.fixed=e},expression:"fixed"}},[a("q-card",{staticStyle:{width:"100%"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Lista de Herramientas")])]),a("q-separator"),a("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"50vh",width:"100%"}},[a("q-input",{staticStyle:{width:"100%"},attrs:{color:"blue",filled:"",label:"Descripcion de la Herramienta"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"line_weight"}})]},proxy:!0}]),model:{value:t.newTool,callback:function(e){t.newTool=e},expression:"newTool"}}),a("br"),a("q-btn",{staticClass:"float-right",attrs:{color:"positive",push:""},on:{click:function(e){return t.addNewAct(t.newTool)}}},[t._v("Agregar")])],1),a("q-separator"),a("q-card-section",[a("q-list",{attrs:{bordered:""}},t._l(t.herramientas,(function(e,i){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:i,attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[t._v(t._s(i))]),a("q-item-section",[t._v(t._s(e))]),a("q-item-section",{attrs:{avatar:""}},[a("q-btn",{attrs:{size:"sm",color:"white"},on:{click:function(e){return t.eliminar(i)}}},[a("q-icon",{attrs:{name:"delete",color:"red"}})],1)],1)],1)})),1)],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Quitar",color:"blue"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Aceptar",color:"blue"}})],1)],1)],1)],1)},O=[],H={data(){return{basic:!1,fixed:!1,newTool:"",herramientas:[]}},methods:{addNewAct(t){""!==this.newTool?(this.herramientas.push(t),this.Herramientas=[...this.herramientas],this.newTool=""):this.$q.notify({position:"bottom",timeout:2500,textColor:"white",type:"warning",message:"Ingresa una Herramienta!!."})},eliminar(t){this.herramientas.splice(t,1)}},computed:{Herramientas:{get(){return this.$store.state.global.Herramientas},set(t){this.$store.commit("global/updateHerramientas",t)}}}},j=H,z=Object(h["a"])(j,T,O,!1,null,null,null),P=z.exports;k()(z,"components",{QBtn:g["a"],QDialog:b["a"],QCard:v["a"],QCardSection:f["a"],QSeparator:q["a"],QInput:w["a"],QIcon:C["a"],QList:y["a"],QItem:S["a"],QItemSection:x["a"],QCardActions:_["a"]}),k()(z,"directives",{Ripple:M["a"],ClosePopup:$["a"]});var B=a("5d36"),U=a("a6a3"),G={components:{ActivityList:I,MaterialList:L,ToolsList:P},data(){return{alert:!1,alertfalse:!1,confirm:!1,modelServicio:!0,modelGarantia:!0,files:null,TipoMantenimiento:null,lastRoute:"/MaintenanceList",fechaHoy:"",idEquipo:"",Material:"",Cantidad:"",Observaciones:"",costoMantenimiento:"",dateCompra:"",InChargeName:"",ImagenEquipo:"",options:["Preventivo","Correctivo"],reportesAux:[]}},created(){this.inicializacionVariables(),console.log("Las flags en el created",this.Flags),console.log(this.$store.state.global.Flags.reporte.Status),this.$store.state.global.Flags.reporte.Status?(console.log("crear mantenimiento de reporte"),this.createMaintenanceOfReport()):this.createNormalMaintenance()},destroyed(){this.$q.loading.hide()},computed:{IDEM:{get(){return this.$store.state.cardState.IDEM}},Actividades:{get(){return this.$store.state.global.Actividades}},Materiales:{get(){return this.$store.state.global.Materiales}},Cantidades:{get(){return this.$store.state.global.Cantidades}},Herramientas:{get(){return this.$store.state.global.Herramientas}},Usuario:{get(){return this.$store.state.global.Usuario}},Flags:{get(){return this.$store.state.global.Flags},set(t){this.$store.commit("global/updateFlags",t)}},Reportes:{get(){return this.$store.state.cardState.Reportes},set(t){this.$store.commit("cardState/updateReportes",t)}},Equipos:{get(){return this.$store.state.cardState.Equipos},set(t){this.$store.commit("cardState/updateEquipments",t)}}},methods:{async _insertMaintenance(){let t="",e="",a=new Date,i=a.getSeconds(),s=a.getMinutes(),r=a.getHours(),o=a.getDate(),l=a.getMonth()+1,n=a.getFullYear();t=l<10?`${n}-0${l}`:`${n}-${l}`,e=`${o}-${r}:${s}:${i}`;var d={ID_Equipo:this.$data.idEquipo,Fecha:t,Dia:e,Tipo_Mantenimiento:this.$data.TipoMantenimiento,Nombre_Encargado:this.$data.InChargeName,Costo_Mantenimiento:parseInt(this.$data.costoMantenimiento),Observaciones:this.Observaciones,Descripcion:this.Actividades,Herramientas:this.Herramientas,Materiales:this.Materiales,Cantidad:this.Cantidades};this.$q.loading.show({spinner:U["a"],spinnerColor:"indigo-10",spinnerSize:50,backgroundColor:"indigo-11",message:"Subiendo Mantenimiento",messageColor:"indigo-10"});try{if(console.log("esta a punto"),"/MaintenanceList"==this.Flags.lastRoute){await B["a"].createMaintenance(d);this.$q.loading.hide(),this.alert=!0,await this.$store.dispatch("cardState/postStatisticAction")}else if(this.Flags.reporte.Status){await B["a"].createMaintenance(d);try{let t={Fecha:this.Flags.reporte.Fecha,Dia:this.Flags.reporte.Dia,Status:!1};console.log("este es el id del reporte",t);await B["a"].updateReport(t);for(var p=0;p<this.Reportes.length;p++)this.Reportes[p].Dia===this.Flags.reporte.Dia&&(this.Reportes[p]=c()(c()({},this.Reportes[p]),this.Flags.reporte));console.log("al final",this.Reportes),this.$q.notify({color:"green",textColor:"white",icon:"notification_important",message:"Se verificó el reporte automáticamente"}),await this.$store.dispatch("cardState/postStatisticAction")}catch(m){this.$q.notify({color:"orange",textColor:"white",icon:"notification_important",message:"No se pudo actualizar el Status del reporte, por favor actualizalo manualmente a verificado"})}this.$q.loading.hide(),this.alert=!0}}catch(m){console.log(m),this.alertfalse=!0,this.$q.loading.hide()}},createMaintenanceOfReport(){this.Equipos.forEach((t=>{t.ID_Equipo==this.Flags.reporte.ID_Equipo&&(this.ImagenEquipo=t.Foto)})),this.TipoMantenimiento="Correctivo",this.Observaciones="<b>A causa de un reporte por: \n </b>"+this.Flags.reporte.Reporte,this.lastRoute=this.Flags.lastRoute},createNormalMaintenance(){this.ImagenEquipo=this.$store.state.cardState.EquipoSelected[0].Foto},inicializacionVariables(){this.idEquipo=this.IDEM,this.InChargeName=this.Usuario.name,this.reportesAux=[...this.Reportes]}}},J=G,K=(a("56f7"),a("65c6")),V=a("068f"),Y=a("ddd8"),W=a("cb32"),X=a("d66b"),Z=Object(h["a"])(J,o,l,!1,null,"7948715e",null),tt=Z.exports;k()(Z,"components",{QToolbar:K["a"],QImg:V["a"],QInput:w["a"],QIcon:C["a"],QSelect:Y["a"],QBtn:g["a"],QDialog:b["a"],QCard:v["a"],QCardSection:f["a"],QCardActions:_["a"],QAvatar:W["a"],QEditor:X["a"]}),k()(Z,"directives",{ClosePopup:$["a"]});var et={name:"MaintenanceCreate",components:{UserAccount:r["a"],MaintenanceInput:tt},data(){return{leftDrawerOpen:!1,Numero:9}},computed:{drawerState:{get(){return this.$store.state.showcase.drawerState?this.$q.dark.set(!0):this.$q.dark.set(!1),this.$store.state.showcase.drawerState},set(t){this.$store.commit("showcase/updateDrawerState",t)}}}},at=et,it=(a("5fd4"),a("4d5a")),st=a("e359"),rt=a("09e3"),ot=Object(h["a"])(at,i,s,!1,null,null,null);e["default"]=ot.exports;k()(ot,"components",{QLayout:it["a"],QHeader:st["a"],QToolbar:K["a"],QImg:V["a"],QBtn:g["a"],QPageContainer:rt["a"]})},"1cc3":function(t,e,a){},"56f7":function(t,e,a){"use strict";a("a012")},"5fd4":function(t,e,a){"use strict";a("1cc3")},a012:function(t,e,a){}}]);